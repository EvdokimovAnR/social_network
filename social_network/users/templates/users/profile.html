{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.0/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.0/js/bootstrap.min.js"></script>
<!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">-->
<nav class="navbar">
    <div class="navbar-left">
        <a href="{% url 'posts:index' %}" class="navbar-brand">
            <img src="{% static 'img/brand-white.png' %}" alt="logo">
        </a>
        <ul class="navbar-nav" id="navbarNav">
            <li class="nav-item"><a href="{% url 'posts:index'%}" class="nav-link active">Посты</a></li>
            {% if user.is_authenticated %}
                <li class="nav-item"><a href="{% url 'users:profile' request.user.id %}" class="nav-link">Профиль</a></li>
                <li class="nav-item"><a href="{% url 'chats:message' user.id %}" class="nav-link">Сообщения</a></li>
                <li class="nav-item"><a href="{% url 'users:friends' %}" class="nav-link">Друзья</a></li>
            {% else %}
                <li class="nav-item"><a href="{% url 'users:login'%}" class="nav-link">Войти</a></li>
            {% endif %}
        </ul>
    </div>
    <!-- Остальные элементы справа -->
</nav>

<style>
.navbar {
    display: flex;
    align-items: center;
    background-color: #3097D1;
    padding: 10px 20px;
}

.navbar-left {
    display: flex;
    align-items: center;
    margin-right: auto; /* Прижимает всю группу к левому краю */
}

.navbar-nav {
    list-style: none;
    padding: 0;
    margin: 0 0 0 20px; /* Отступ от логотипа */
    display: flex;
}

/* Остальные стили остаются без изменений */
.navbar-brand img {
    width: 80px;
    height: auto;
}

.nav-item {
    margin-right: 15px;
}

.nav-link {
    color: white;
    text-decoration: none;
    padding: 5px 10px;
}

.nav-link:hover {
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
}


</style>

<style>
body{background:url(https://bootstraptema.ru/images/bg/bg-1.png)}

#main {
 background-color: #f2f2f2;
 padding: 20px;
-webkit-border-radius: 4px;
 -moz-border-radius: 4px;
 -ms-border-radius: 4px;
 -o-border-radius: 4px;
 border-radius: 4px;
 border-bottom: 4px solid #ddd;
}
#real-estates-detail #author img {
 -webkit-border-radius: 100%;
 -moz-border-radius: 100%;
 -ms-border-radius: 100%;
 -o-border-radius: 100%;
 border-radius: 100%;
 border: 5px solid #ecf0f1;
 margin-bottom: 10px;
}
#real-estates-detail .sosmed-author i.fa {
 width: 30px;
 height: 30px;
 border: 2px solid #bdc3c7;
 color: #bdc3c7;
 padding-top: 6px;
 margin-top: 10px;
}
.panel-default .panel-heading {
 background-color: #fff;
}
#real-estates-detail .slides li img {
 height: 450px;
}
body {
            margin: 0;
            font-family: Arial, sans-serif;
        }
        .navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: #3097D1;
            padding: 10px 20px;
        }
        .navbar-brand img {
            width: 80px;
            height: auto;
        }
        .navbar-nav {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
        }
        .nav-item {
            margin-right: 15px;
        }
        .nav-link {
            color: white;
            text-decoration: none;
            padding: 5px 10px;
        }
        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }
        .form-inline {
            display: flex;
            align-items: center;
        }
        .form-control {
            padding: 5px;
            margin-right: 10px;
        }
        .icon {
            color: #CBE4F2;
            font-size: 22px;
            margin-left: 15px;
        }
        .avatar {
            border-radius: 50%;
            width: 32px;
            height: auto;
            margin-left: 15px;
        }
        @media (max-width: 768px) {
            .navbar-nav {
                display: none; /* Скрыть навигацию на маленьких экранах */
            }
            .navbar-toggler {
                display: block; /* Показать кнопку для мобильных устройств */
                cursor: pointer;
                background-color: transparent;
                border: none;
                color: white;
                font-size: 20px;
            }
        }
        .logout-button {
    background-color: #dc3545; /* Красный цвет фона */
    color: white; /* Белый цвет текста */
    margin: 160px;
    padding: 10px 20px; /* Отступы внутри кнопки */
    border: none; /* Убираем рамку */
    border-radius: 5px; /* Закругление углов */
    cursor: pointer; /* Курсор при наведении */
    font-size: 16px; /* Размер шрифта */
    transition: background-color 0.3s ease; /* Плавный переход цвета при наведении */
}

.logout-button:hover {
    background-color: #c82333; /* Темно-красный цвет при наведении */
}

.logout-button:focus {
    outline: none; /* Убираем рамку при фокусе */
}
</style>

<div class="container">
<div id="main">


 <div class="row" id="real-estates-detail">
 <div class="col-lg-4 col-md-4 col-xs-12">
 <div class="panel panel-default">
 <div class="panel-heading">
 <header class="panel-title">
 <div class="text-center">
 <strong>Пользователь сайта</strong>
 </div>
 </header>
 </div>
<div class="panel-body">
    <div class="text-center" id="author">
<img src="{% if user.profile_picture %}{{ user.profile_picture.url}}{% else %}{% static 'img/default_avatar.png' %}{% endif %}"
     style="width: 200px; height: 200px;">
    </div>
</div>


 </div>
 </div>
 <div class="col-lg-8 col-md-8 col-xs-12">
 <div class="panel">
 <div class="panel-body">
 <ul id="myTab" class="nav nav-pills">

     {% if not is_owner %}
     <li class="active"><a href="#detail" data-toggle="tab">О пользователе</a></li>
 <li class=""><a href="{% url 'chats:message' user.id %}" >Отправить сообщение</a></li>
     {% endif %}
 </ul>
 <div id="myTabContent" class="tab-content">
<hr>
 <div class="tab-pane fade active in" id="detail">
 <h4>Данные пользователя:</h4>
 <table class="table table-th-block">

<form method="POST" action="{% url 'users:profile' request.user.id %}" enctype="multipart/form-data">
    {% csrf_token %}
    {% if is_owner %}
    <table class="table table-th-block">
        <tbody>

                <td class="active">Загрузить фото пользователя:</td>
                <td> {{ form.profile_picture }} </td>
            </tr>
            <tr>
                <td class="active">Имя:</td>
                <td> {{ form.first_name }} </td>
            </tr>
            <tr>
                <td class="active">Фамилия:</td>
                <td>{{ form.last_name }}</td>
            </tr>
            <tr>
                <td class="active">Ник:</td>
                <td>{{ form.username }}</td>
            </tr>

            <tr>
                <td class="active">Зарегистрирован:</td>
                <td>{{ user.created_at }}</td>
            </tr>
            <tr>
                <td class="active">Страна:</td>
                <td>{{ form.country }}</td>
            </tr>
            <tr>
                <td class="active">Город:</td>
                <td>{{ form.city }}</td>
            </tr>
            <tr>
                <td class="active">Полных лет:</td>
                <td>{{ form.age }}</td>
            </tr>
            <tr>
                <td class="active">Номер телефона:</td>
                <td>{{ form.telephone_number }}</td>
            </tr>
        </tbody>
    </table>
    <button type="submit" class="btn btn-success">Сохранить изменения</button>
    {% else %}
    <table class="table table-th-block">
        <tbody>
            <tr>
                <td class="active">Имя:
                </td>
                <td>
                    <span>{{ user.first_name }}</span>
                </td>
            </tr>
            <tr>
                <td class="active">Фамилия:
                </td>
                <td>
                    <span>{{ user.last_name }}</span>
                </td>
            </tr>
            <tr>
                <td class="active">Ник:
                </td>
                <td>
                    <span>{{ user.username }}</span>
                </td>
            </tr>
            <tr>
                <td class="active">Город:
                </td>
                <td>
                    <span>{{ user.city }}</span>
                </td>
            </tr>
            <tr>
                <td class="active">Страна:
                </td>
                <td>
                    <span>{{ user.country }}</span>
                </td>
            </tr>


            <tr>
                <td class="active">Возраст:
                </td>
                <td>
                    <span>{{ user.age }}</span>
                </td>
            </tr>
            <tr>
                <td class="active">Номер телефона::
                </td>
                <td>
                    <span>{{ user.city }}</span>
                </td>
            </tr>
        </tbody>
    </table>

    {% if is_friend %}
    <a href="{% url 'users:delete_friend' user.id %}" class="add-post-button btn btn-danger">Удалить из друзей</a>
    {% elif friend_request_sent %}
    <button class="add-post-button btn btn-secondary" disabled>Заявка в друзья отправлена</button>
    {% elif friend_request_sent and friend_request.from_user == user %}
        <button class="add-post-button btn btn-secondary" disabled>{{ friend_request.from_user}} {{ user }}</button>
    {% else %}
    <a href="{% url 'users:send_friend_request' user.id %}" class="add-post-button btn btn-success" id="add-friend-btn">Добавить в друзья</a>
    {% endif %}

    {% endif %}


</form>
      {% if is_owner %}
     <a href="{% url 'users:logout' %}" class="logout-button">Выйти из профиля</a>
     {% endif %}

 </table>
 </div>
<!-- <div class="tab-pane fade" id="contact">-->
<!-- <p></p>-->
<!-- <form role="form">-->
<!-- <div class="form-group">-->
<!-- <label>Ваше имя</label>-->
<!-- <input type="text" class="form-control rounded" placeholder="Укажите Ваше Имя">-->
<!-- </div>-->
<!-- <div class="form-group">-->
<!-- <label>Ваш телефон</label>-->
<!-- <input type="text" class="form-control rounded" placeholder="(+7)(095)123456">-->
<!-- </div>-->
<!-- <div class="form-group">-->
<!-- <label>E-mail адрес</label>-->
<!-- <input type="email" class="form-control rounded" placeholder="Ваш Е-майл">-->
<!-- </div>-->
<!-- <div class="form-group">-->
<!-- <div class="checkbox">-->
<!-- <label>-->
<!-- <input type="checkbox"> Согласен с условиями-->
<!-- </label>-->
<!-- </div>-->
<!-- </div>-->
<!-- <div class="form-group">-->
<!-- <label>Текст Вашего сообщения</label>-->
<!-- <textarea class="form-control rounded" style="height: 100px;"></textarea>-->
<!-- <p class="help-block">Текст сообщения будет отправлен пользователю</p>-->
<!-- </div>-->
<!-- <div class="form-group">-->
<!-- <button type="submit" class="btn btn-success" data-original-title="" title="">Отправить</button>-->
<!-- </div>-->
<!-- </form>-->
<!-- </div>-->
 </div>
 </div>
 </div>
 </div>
 </div>

</div><!-- /.main -->
</div><!-- /.container -->
<script>
    function toggleMenu() {
        const navbarNav = document.getElementById('navbarNav');
        if (navbarNav.style.display === "flex") {
            navbarNav.style.display = "none";
        } else {
            navbarNav.style.display = "flex";
            navbarNav.style.flexDirection = "column";
            navbarNav.style.position = "absolute";
            navbarNav.style.backgroundColor = "#3097D1";
            navbarNav.style.width = "100%";
                        navbarNav.style.zIndex = "1000";
        }
    }
</script>
<script>
    document.getElementById('add-friend-btn').addEventListener('click', function(event) {
        event.preventDefault(); // Отменяем стандартное поведение ссылки

        const button = this;
        const url = button.href;

        // Отправляем запрос на сервер
        fetch(url, {
            method: 'GET',
            headers: {
                'X-Requested-With': 'XMLHttpRequest', // Для обработки AJAX на сервере
            },
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Меняем текст кнопки и блокируем её
                button.textContent = 'Заявка отправлена';
                button.classList.remove('btn-success');
                button.classList.add('btn-secondary');
                button.removeAttribute('href');
                button.setAttribute('disabled', true);
            }
        })
        .catch(error => {
            console.error('Ошибка:', error);
        });
    });
</script>
</body>
</html>

</body>
</html>