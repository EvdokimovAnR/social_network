{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">
<link rel="stylesheet" href="static/style.css">

<!------------------LIght BOx for Gallery-------------->
<link rel="stylesheet" href="lightbox.min.css">
<script type="text/javascript" src="lightbox-plus-jquery.min.js"></script>
<!------------------LIght BOx for Gallery-------------->
<title>Форум</title>
</head>
<body>


    <!-------------------------------NAvigation Starts------------------>

    <nav class="navbar navbar-expand-md navbar-dark mb-4" style="background-color:#3097D1">
        <a href="{% url 'posts:index'%}" class="navbar-brand"><img src="{% static 'img/brand-white.png' %}" alt="logo" class="img-fluid" width="80px" height="100px"></a>
        <button class="navbar-toggler" data-toggle="collapse" data-target="#responsive"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="responsive">
            <ul class="navbar-nav mr-auto text-capitalize">
                <li class="nav-item"><a href="{% url 'posts:index'%}" class="nav-link active">Посты</a></li>
                {% if user.is_authenticated %}
                <li class="nav-item"><a href="{% url 'users:profile' request.user.id %}" class="nav-link">Профиль</a></li>
                <li class="nav-item"><a href="{% url 'chats:message' user.id %}" class="nav-link">Сообщения</a></li>
                {% else %}
                <li class="nav-item"><a href="{% url 'users:login'%}" class="nav-link">Войти</a></li>
                {% endif %}

<!--                <li class="nav-item"><a href="notification.html" class="nav-link">docs</a></li>-->
<!--                <li class="nav-item"><a href="#" class="nav-link d-md-none">growl</a></li>-->
<!--                <li class="nav-item"><a href="{% url 'users:logout'%}" class="nav-link">logout</a></li>-->
            </ul>
            <form action="" class="form-inline ml-auto d-none d-md-block">
                <input type="text" name="search" id="search" placeholder="Search" class="form-control form-control-sm">
            </form>
            <a href="notification.html" class="text-decoration-none" style="color:#CBE4F2;font-size:22px;"><i class="far fa-bell ml-3 d-none d-md-block"></i></a>
            {% if user.is_authenticated and user.profile_picture%}
            <img src="{{ user.profile_picture.url }}" alt="" class="rounded-circle ml-3 d-none d-md-block" width="32px" height="32px">
            {% else %}
            <img src="{% static 'img/default_avatar.png'%}" alt="" class="rounded-circle ml-3 d-none d-md-block" width="32px" height="32px">
            {% endif %}
        </div>
    </nav>

    <!---------------------------------------------Ends navigation------------------------------>

    <!---------------------------MOdal Section  satrts------------------->

    <div class="modal fade" id="modalview">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">

            <div class="modal-content">


                <div class="modal-header">
                    <div class="modal-title h4">Написать пост</div>

                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>


                <div class="modal-body">


                    <ul class="list-unstyled">


                     <a href="#" class="text-decoration-none">
                        <li class="media hover-media">

                                <img src="static/img/avatar-dhg.png" alt="img" width="60px" height="60px" class="rounded-circle mr-3">

                                <div class="media-body text-dark">
                                        <h6 class="media-header">Jchob Thunder and <strong> 1 others</strong></h6>
                                        <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>

                                </div>

                        </li>
                    </a>
                    <hr class="my-3">



                    <a href="#" class="text-decoration-none">
                            <li class="media hover-media">

                                    <img src="img/avatar-fat.jpg" alt="img" width="60px" height="60px" class="rounded-circle mr-3">

                                    <div class="media-body text-dark">
                                            <h6 class="media-header">Mark Otto and <strong> 3 others</strong></h6>
                                            <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>

                                    </div>

                            </li>
                        </a>


                        <hr class="my-3">


                        <a href="#" class="text-decoration-none">
                            <li class="media hover-media">

                                    <img src="img/avatar-mdo.png" alt="img" width="60px" height="60px" class="rounded-circle mr-3">

                                    <div class="media-body text-dark">
                                            <h6 class="media-header">Archer andu and <strong> 5 others</strong></h6>
                                            <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>

                                    </div>

                            </li>
                        </a>

                        <hr class="my-3">


                        <a href="#" class="text-decoration-none">
                                <li class="media hover-media">

                                        <img src="static/img/avatar-dhg.png" alt="img" width="60px" height="60px" class="rounded-circle mr-3">

                                        <div class="media-body text-dark">
                                                <h6 class="media-header">Jchob Thunder and <strong> 1 others</strong></h6>
                                                <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>

                                        </div>

                                </li>
                            </a>
                            <hr class="my-3">



                            <a href="#" class="text-decoration-none">
                                    <li class="media hover-media">

                                            <img src="img/avatar-fat.jpg" alt="img" width="60px" height="60px" class="rounded-circle mr-3">

                                            <div class="media-body text-dark">
                                                    <h6 class="media-header">Mark Otto and <strong> 3 others</strong></h6>
                                                    <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>

                                            </div>

                                    </li>
                                </a>


                                <hr class="my-3">


                                <a href="#" class="text-decoration-none">
                                    <li class="media hover-media">

                                            <img src="img/avatar-mdo.png" alt="img" width="60px" height="60px" class="rounded-circle mr-3">

                                            <div class="media-body text-dark">
                                                    <h6 class="media-header">Archer andu and <strong> 5 others</strong></h6>
                                                    <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>

                                            </div>

                                    </li>
                                </a>


                                <hr class="my-3">
                                <a href="#" class="text-decoration-none">
                                        <li class="media hover-media">

                                                <img src="static/img/avatar-dhg.png" alt="img" width="60px" height="60px" class="rounded-circle mr-3">

                                                <div class="media-body text-dark">
                                                        <h6 class="media-header">Jchob Thunder and <strong> 1 others</strong></h6>
                                                        <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>

                                                </div>

                                        </li>
                                    </a>
                                    <hr class="my-3">



                                    <a href="#" class="text-decoration-none">
                                            <li class="media hover-media">

                                                    <img src="img/avatar-fat.jpg" alt="img" width="60px" height="60px" class="rounded-circle mr-3">

                                                    <div class="media-body text-dark">
                                                            <h6 class="media-header">Mark Otto and <strong> 3 others</strong></h6>
                                                            <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>

                                                    </div>

                                            </li>
                                        </a>


                                        <hr class="my-3">


                                        <a href="#" class="text-decoration-none">
                                            <li class="media hover-media">

                                                    <img src="img/avatar-mdo.png" alt="img" width="60px" height="60px" class="rounded-circle mr-3">

                                                    <div class="media-body text-dark">
                                                            <h6 class="media-header">Archer andu and <strong> 5 others</strong></h6>
                                                            <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>

                                                    </div>

                                            </li>
                                        </a>




                    </ul>





                </div>
            </div>


        </div>


    </div>

    <!-------------------------------MOdal Ends---------------------------->



    <!-------------------------------------------Start Grids layout for lg-xl-3 columns and (xs-lg 1 columns)--------------------------------->


    <div class="container">
        <div class="row">


            <!--------------------------left columns  start-->

            <div class="col-12 col-lg-3">

                <div class="left-column">


                    <div class="card card-left1 mb-4" >
                        {% if user.is_authenticated and user.profile_picture%}

                            <img src="{{ user.profile_picture.url }}" alt="" class="card-img-top img-fluid">
                        {% else %}
                        <img src="{% static 'img/default_avatar.png'%}" alt="" class="card-img-top img-fluid">
                        {% endif %}
                        <div class="card-body text-center ">
                            {% if user.is_authenticated and user.profile_picture%}
                            <img src="{{ user.profile_picture.url }}" alt="img" width="120px" height="120px" class="rounded-circle mt-n5">
                            {% else %}
                            <img src="{% static 'img/default_avatar.png'%}" alt="img" width="120px" height="120px" class="rounded-circle mt-n5">
                            {% endif %}
                            <h5 class="card-title">{{ user.first_name}} {{ user.last_name }}</h5>
<!--                            <p class="card-text text-justify mb-2">BIO</p>-->
                            <ul class="list-unstyled nav justify-content-center">
    <a href="#" class="text-dark text-decoration-none">
        <li class="nav-item">Друзей <br> <strong>12M</strong></li>
    </a>
                                {% if user.is_authenticated %}
    <a href="#" class="text-dark text-decoration-none">
        <li class="nav-item">Постов <br> <strong>{{ posts_count }}</strong></li>
    </a>
                                {% endif %}
</ul>

                        </div>
                    </div>
                    <div class="card shadow-sm card-left2 mb-4">

<!--                        <div class="card-body">-->

<!--                                <h5 class="mb-3 card-title">About <small><a href="#" class="ml-1">Edit</a></small></h5>-->

<!--                                <p class="card-text"> <i class="fas fa-calendar-week mr-2"></i> Went to <a href="#" class="text-decoration-none">oh canada</a></p>-->

<!--                                <p class="card-text"> <i class="fas fa-user-friends mr-2"></i> Become a friend with <a href="#" class="text-decoration-none">obama</a></p>-->
<!--                                <p class="card-text"> <i class="far fa-building mr-2"></i> Work at <a href="#" class="text-decoration-none">Github</a></p>-->
<!--                                <p class="card-text"> <i class="fas fa-home mr-2"></i> Live in <a href="#" class="text-decoration-none">San francisco</a></p>-->
<!--                                <p class="card-text"> <i class="fas fa-map-marker mr-2"></i> From <a href="#" class="text-decoration-none">Seattle, WA</a></p>-->




<!--                        </div>-->
                    </div>
                    <div class="card shadow-sm card-left3 mb-4">

<!--                        <div class="card-body">-->
<!--                            <h5 class="card-title">Photos<small class="ml-2"><a href="#">.Edit </a></small></h5>-->

<!--                            <div class="row">-->
<!--                                <div class="col-6 p-1">-->
<!--                                    <a href="img/left1.jpg" data-lightbox="id" ><img src="img/left1.jpg" alt="img" class="img-fluid my-2"></a>-->
<!--                                    <a href="img/left2.jpg"data-lightbox="id"><img src="img/left2.jpg" alt="img" class="img-fluid my-2"></a>-->
<!--                                    <a href="img/left3.jpg"data-lightbox="id"><img src="img/left3.jpg" alt="img" class="img-fluid my-2"></a>-->

<!--                                </div>-->


<!--                                <div class="col-6 p-1">-->
<!--                                        <a href="img/left4.jpg"data-lightbox="id"><img src="img/left4.jpg" alt="img" class="img-fluid my-2"></a>-->
<!--                                        <a href="img/left5.jpg"data-lightbox="id"><img src="img/left5.jpg" alt="img" class="img-fluid my-2"></a>-->
<!--                                        <a href="img/left6.jpg"data-lightbox="id"><img src="img/left6.jpg" alt="img" class="img-fluid my-2"></a>-->

<!--                                    </div>-->

<!--                            </div>-->

<!--                        </div>-->

                        </div>
                </div>
            </div>
 <!--------------------------Ends Left columns-->





 <!---------------------------------------Middle columns  start---------------->
            <div class="col-12 col-lg-6" >
                <div class="middle-column">
                    <div class="card" >

                        <div class="card-header bg-transparent">
    <button class="add-post-button btn btn-success" id="add-post-button">Добавить пост</button>

    {% if user.is_authenticated %}
        <form action="{% url 'posts:index'%}" class="form-inline" id="post-form" style="display: none;" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="input-group w-100 mb-3">
                <textarea name="content" id="myTextarea" required=""></textarea>
                <input type="file" name="image" class="form-control-file">
            </div>
            <button type="submit" class="btn btn-primary">Сохранить пост</button>
            <button type="button" class="btn btn-secondary" id="cancel-button">Отмена</button>
        </form>
    {% else %}
        <div id="auth-message" style="display: none;">  <!-- Message for not authorized users-->
           <h5>Для добавления поста необходимо <br> авторизоваться или зарегистрироваться.</h5>
            <a href="{% url 'users:login' %}" class="btn btn-primary">Авторизация</a>
             <a href="{% url 'users:registration' %}" class="btn btn-secondary">Регистрация</a>
        </div>

    {% endif %}
</div>


                        {% for post in posts %}
   <div class="card-body">
    <div class="media">
        <a href="{% url 'users:profile'   post.user.id %}">
    {% if post.user.profile_picture %}
        <img src="{{ post.user.profile_picture.url }}" alt="img" width="55px" height="55px" class="rounded-circle mr-3">
    {% else %}
        <img src="{% static 'img/default_avatar.png' %}" alt="img" width="55px" height="55px" class="rounded-circle mr-3">
    {% endif %}
</a>

        <div class="media-body">
            <h5>{{ post.user.username }}</h5>
            <p class="card-text text-justify">{{ post.content }}</p>
            <div class="row no-gutters mb-3">
    <div class="col-6 p-1 text-center">
      {% if post.image %}
        <a href="{{ post.image.url }}" target="_blank" style="width: 650px;">
          <img src="{{ post.image.url }}" alt="Post image" style="width: 350px;">
        </a>
      {% endif %}
    </div>
</div>
        </div>
        <small> {{ post.created_at }}</small>
    </div>
   </div>
                        {% endfor %}



 <hr>

<div class="card-body">

    <div class="media">
            <img src="img/avatar-fat.jpg" alt="img" width="55px" height="55px" class="rounded-circle mr-3">

        <div class="media-body">
                <h5>Jacob Thornton</h5>
                <p class="text-justify">Donec id elit non mi porta gravida at eget metus. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
                    Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>



        </div>

        <small>14 min</small>

    </div>





</div>
<hr>

<div class="card-body">

    <div class="media">

            <img src="img/avatar-mdo.png" alt="img" width="55px" height="55px" class="rounded-circle mr-3">
            <div class="media-body">
                <h5>Mark Otto</h5>
                <p class="text-justify">Donec ullamcorper nulla non metus auctor fringilla. Vestibulum id ligula porta felis euismod semper. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.</p>
             <a href="img/mid5.jpg" data-lightbox="id"><img src="img/mid5.jpg" alt="" class="img-fluid shadow-sm img-thumbnail">   </a>

            </div>


            <small class="text-muted">10 min</small>



    </div>




</div>








 </div>









 </div>








  </div>













  <br> <br> <br><br> <br> <br>

<!------------------------Middle column Ends---------------->








<!---------------------------Statrs Right Columns----------------->



<div class="col-12 col-lg-3">


    <div class="right-column">

        <div class="card shadow-sm mb-4" >
            <div class="card-body">
                <h6 class="card-title">Sponsored</h6>
                <img src="img/right1.jpg" alt="card-img" class="card-img mb-3">
                <p class="card-text text-justify"> <span class="h6">It might be time to visit Iceland.</span> Iceland is so chill, and everything looks cool here. Also, we heard the people are pretty nice.  What are you waiting for?</p>
                <a href="#" class="btn btn-outline-info card-link btn-sm">Buy a ticket</a>


            </div>

        </div>


        <div class="card shadow-sm mb-4">

            <div class="card-body">

                    <h6 class="card-title ">Likes <a href="#" class="ml-1"><small>.View All</small> </a> </h6>
                    <div class="row no-gutters d-none d-lg-flex">
                        <div class="col-6 p-1">
                                <img src="static/img/avatar-dhg.png" alt="img" width="80px" height="80px" class="rounded-circle mb-4">
                                <img src="img/avatar-fat.jpg" alt="img" width="80px" height="80px" class="rounded-circle">



                        </div>
                        <div class="col-6 p-1 text-left">
                            <h6>Jacob Thornton @fat</h6>
                            <a href="#" class="btn btn-outline-info btn-sm mb-3"><i class="fas fa-user-friends"></i>Follow </a>

                            <h6>Mark otto</h6>
                            <a href="#" class="btn btn-outline-info  btn-sm"><i class="fas fa-user-friends"></i>Follow </a>

                        </div>

                    </div>

            </div>

            <div class="card-footer">

                <p class="lead" style="font-size:18px;">Dave really likes these nerds, no one knows why though.</p>
            </div>



        </div>

        <div class="card shadow-sm">
            <div class="card-body">
                <p>&copy; 2018 Bootstrap



                        <a href="#">About</a>
                        <a href="#">Help</a>
                        <a href="#">Terms</a>
                        <a href="#">Privacy</a>
                        <a href="#">Cookies</a>
                        <a href="#">Ads </a>
                        <a href="#">Info</a>
                        <a href="#">Brand</a>
                        <a href="#">Blog</a>
                        <a href="#">Status</a>
                        <a href="#">Apps</a>
                        <a href="#">Jobs</a>
                        <a href="#">Advertise</a>

















                </p>
            </div>

        </div>









    </div>




























            </div>

</div>

<!------------------------Light BOx OPtions------------->
<script>
        lightbox.option({

        })
    </script>



<!------------------------Light BOx OPtions------------->
        <style>
.nav-item {
  margin-right: 20px; /* Добавляем отступ справа между элементами */
}
.center-button-form {
    display: flex;         /* делаем форму flex контейнером */
    justify-content: center; /* выравниваем кнопку по центру горизонтально*/
}

.add-post-button {
   /* display: flex; removed because it is not used here */
    /* text-align: center;  removed because it is not used here*/
    background-color: #28a745; /* Зеленый цвет фона */
    color: white; /* Белый цвет текста */
    padding: 10px 20px; /* Отступы внутри кнопки */
    border: none; /* Убираем рамку */
    border-radius: 5px; /* Закругление углов */
    cursor: pointer; /* Курсор при наведении */
    font-size: 16px; /* Размер шрифта */
    transition: background-color 0.3s ease; /* Плавный переход цвета при наведении */
}

.add-post-button:hover {
    background-color: #218838; /* Темно-зеленый цвет при наведении */
}

.add-post-button:focus {
    outline: none; /* Убираем рамку при фокусе */
}
textarea[name="content"] {
    width: 500px;
    max-width: 100%;
    height: 150px;
    box-sizing: border-box;
    resize: vertical;
    padding: 10px;
    border: 1px solid #ced4da;
    border-radius: 4px;
    font-family: sans-serif;
    margin: 0px;
    line-height: normal;
    direction: ltr;
    text-align: left;
    unicode-bidi: plaintext;
}

@media (max-width: 768px) {
    textarea[name="content"] {
        width: 100%;
    }
}
#auth-message {
    padding: 15px;
    background-color: #f8f9fa;
    border: 1px solid #ced4da;
    border-radius: 4px;
    text-align: center;
    margin-top: 10px;
}
</style>





<script>
    document.getElementById('add-post-button').addEventListener('click', function() {
        document.getElementById('post-form').style.display = 'block';
    });

    document.getElementById('cancel-button').addEventListener('click', function() {
        document.getElementById('post-form').style.display = 'none';
    });
</script>
        <script> document.addEventListener('DOMContentLoaded', function () {
    const addButton = document.getElementById('add-post-button');
    const postForm = document.getElementById('post-form');
    const authMessage = document.getElementById('auth-message');

    addButton.addEventListener('click', function() {
        if (postForm) {
            postForm.style.display = 'block';
            authMessage.style.display = 'none';
         }else if (authMessage) {
           authMessage.style.display = 'block';
         }

    });
     if (postForm) {
            const cancelButton = document.getElementById('cancel-button');
         cancelButton.addEventListener('click', function () {
           postForm.style.display = 'none';
         });
    }

});</script>



        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
</body>
</html>